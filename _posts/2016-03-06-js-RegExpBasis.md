---
title: 正则表达式基础笔记
date: 2016-03-06 22:24:20
categories: JavaScript
tags: 正则表达式
---
## 什么是正则表达式？
 - 在编写处理字符串的程序或者网页时，经常会有查找符合某些复杂规则的字符串的需要。
 - 正则表达式就是用于描述这些规则的工具。
 - 正则表达式就是记录文本规则的代码。

<!--more-->

## 元字符

`\ba\w*\b` 匹配以字母 a 开头的单词

 > 先是某个单词的开头处`\b`，然后是字母 `a`，然后是任意数量的字母或数字 `\w*`，最后是单词的结束处 `\b`

`\d+` 匹配一个或者更多连续的数字

> 这里的 `+` 和 `*` 是类似的元字符
不同的是，`*` 匹配重复任意次（可能是0次）
`+` 匹配重复更多 1 次或者更多次

`\bw{6}\b` 匹配刚好 6 个字符的单词

### 常用的元字符

代码 | 说明
:------: | :------
`.` | 匹配除换行符以外的任何字符
`\w` | 匹配字母或数字或下划线或汉字
`\s` | 匹配任意的空白符
`\d` | 匹配数字
`\b` | 匹配单词的开始或结束
`^` | 匹配字符串的开始
`$` | 匹配字符串的结束

比如一个网站要求你填写的 QQ 号必须是 5-12 位的数字时，可以使用 `^\d{5,12}$`；
`{5,12}` 表示重复次数不少于 5 次，不能多于 12 次，否则都不匹配
**有些正则表达式处理工具还有一个处理多行的选项，如果选中了这个选项，^ 和 $ 的意义就变成了匹配行的开始处和结束处**

## 字符转义
如果想查找元字符本身的话，就要使用 `\` 来取消这些字符的特殊意义
例如：`\.` `\*` `\\` 

## 重复
**限定符** -- 指定数量的代码

代码 / 语法 | 说明
:---: |:----:
`*` | 重复 0 次或更多次
`+` | 重复一次或更多次
`？` | 重复 0 次或 1 次
`{n}` | 重复 n 次
`{n,}` | 重复 n 次或更多次
`{n,m}` | 重复 n 次到 m 次

## 字符类
匹配没有预定义元字符的字符集合（比如元音字母 a,e,i,o,u）
只需要在方括号内列出它们就行了，比如：

>  `[aeiou]` 匹配任何一个英文元音字母
>  `[.?!]` 匹配标点符号（`.` 或 `?` 或 `!`）

下面是更复杂的表达式： `\(?0\d{2}[) -]?\d{8}`

这个表达式可以匹配几种格式的电话号码，像 `(010)88886666`，或 `022-22334455`，或 `02912345678` 等

> 首先是一个转义字符 `\(`，他能出现 1 次或 0 次（`?`），然后是一个 `0`，后面跟着两个数字 `\d{2}`，然后是 `)` 或 `空格` 或 `-` 中的一个，它出现 1 次或不出现 `[) -]?`，最后是 8 个数字 `\d{8}`

## 分支条件
- 正则表达式里面的**分支条件**指的是有几种规则，如果满足其中任意一种规则都应该当成匹配，具体方法是用 `|` 把不同的规则分隔开。
- 使用分支条件时，要注意各个条件的顺序（从左到右，短路匹配）

## 分组
重复单个字符，直接在字符后面加上限定符就行了；
如果想要重复多个字符，可以用小括号来指定**子表达式**（也叫**分组**），然后可以指定这个**分组**的重复次数，也可以对这个**分组**进行其他的一些操作。

## 反义
### 常用的反义代码

代码 / 语法 | 说明
:---- | :---:
`\W` | 匹配任意不是字母、数字、下划线以及汉字的字符
`\S` | 匹配任意不是空白符的字符
`\D` | 匹配任意不是数字的字符
`\B` | 匹配不是单词开头或结束的位置
`[^xyz]` | 匹配除了 xyz 以外的任意字符

`\S+` 匹配不包含空白符的字符串
`<a[^>]+>` 匹配用尖括号括起来的以 a 开头的字符串

## 后向引用
- 使用小括号指定一个子表达式之后，**匹配这个子表达式的文本**（也就是分组捕获的内容）可以在表达式或其他程序中作进一步的处理。默认情况下，每个分组会自动拥有一个**组号**，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为 1，第二个为 2，以此类推。 
- **后向引用**用于重复搜索前面某个分组匹配的文本。
- `\1` 表示分组 1 匹配的某个文本
- `\b(w+)\b\s+\1\b` 匹配连着的两个重复的单词
- 可以**指定子表达式的组名**，语法：`(?<Word>\w+)` `(?'Wrod'\w+)` 可以指定组名为 `Word`
- 要反向引用这个分组捕获的内容，可以使用 `\k<Word>`

使用小括号的时候，还有很多特定用途的语法：

### 常用分组语法
- `正向` 和 `负向` 的意思是断言括号中的内容是匹配还是不匹配
- `先行` 与 `回顾` 的意思是实际匹配的内容在断言内容的前面还是后面

![][1]
[1]: http://static.zybuluo.com/mertens/1v18rfodlmg6wap2wzi5fknv/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20160222170800.jpg

## 零宽断言（zero-length assertions）
零宽的意思是指该位置是不占宽度的，也就是只作断言判断，但不匹配实际的内容；`\d(?=\.)` 这个正向先行断言就只匹配点号之前的数字，但是它并不会匹配到这个点号，这个 `\d(?=\.)` 括号中的匹配内容也就是零宽了。

    零宽断言分为四种，分别是：

    正向先行(Positive Lookahead)

    正向回顾(Positive Lookbehind)

    负向先行(Negative Lookahead)

    负向回顾(Negative Lookbehind)

### 正向先行(Positive Lookahead)
- 直接地说“零宽正向先行断言”所匹配的就是**必须出现的断言内容的前面的内容**

### 正向回顾(Positive Lookbehind)
- 理解了前面这个“零宽正向先行断言”，随之而来的就比较好理解了。依照这个逻辑，零宽正向回顾断言所匹配的是必须出现的断言内容之后的内容，它的语法是：`(?<=...)` 比如 `（?<＝\.）\w` 所匹配的就是点号之后的 `ASCII` 字符。

### 负向先行(Negative Lookahead)
- 负向与正向意思相反， 正向是断言内容必须出现，而负向则是断言内容必须不出现。

### 负向回顾(Negative Lookbehind)
- 正负向与先行回顾的概念都已在前面列出， 负向回顾的理解应该就很顺了。负向回顾的语法是：`(?<!...)`。 比如 `(?<!Java)Script` 该正则只匹配不是 JavaScript 的 Script，它就能正确匹配 ECMAScript 和 Script。